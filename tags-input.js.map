{"version":3,"sources":["src/tags-input.js"],"names":[],"mappings":"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","file":"tags-input.js","sourceRoot":"src","sourcesContent":["const BACKSPACE = 8;\nconst TAB = 9;\nconst ENTER = 13;\nconst LEFT = 37;\nconst RIGHT = 39;\nconst DELETE = 46;\nconst COMMA = 188;\nconst SEPERATOR = ',';\nconst COPY_PROPS = 'placeholder pattern spellcheck autocomplete autocapitalize autofocus accessKey accept lang minLength maxLength required'.split(' ');\n\nexport default function tagsInput(input, limit = null) {\n  function createElement(type, name, text, attributes) {\n    const el = document.createElement(type);\n    if (name) el.className = name;\n    if (text) el.textContent = text;\n    for (const key in attributes) {\n      el.setAttribute(`data-${key}`, attributes[key]);\n    }\n    return el;\n  }\n\n  function $(selector, all) {\n    return all === true ? Array.prototype.slice.call(base.querySelectorAll(selector)) : base.querySelector(selector);\n  }\n\n  function getValue() {\n    return $('.tag', true)\n      .map(tag => tag.textContent)\n      .concat(base.input.value || [])\n      .join(SEPERATOR);\n  }\n\n  function setValue(value) {\n    $('.tag', true).forEach(t => base.removeChild(t));\n    savePartialInput(value);\n  }\n\n  function save() {\n    input.value = getValue();\n    input.dispatchEvent(new Event('change'));\n  }\n\n  // Return false if no need to add a tag\n  function addTag(text) {\n    // Add multiple tags if the user pastes in data with SEPERATOR already in it\n    if (~text.indexOf(SEPERATOR)) text = text.split(SEPERATOR);\n    if (Array.isArray(text)) return text.forEach(addTag);\n\n    const tag = text && text.trim();\n    // Ignore if text is empty\n    if (!tag) return false;\n\n    // For duplicates, briefly highlight the existing tag\n    if (!input.getAttribute('duplicates')) {\n      const exisingTag = $(`[data-tag=\"${tag}\"]`);\n      if (exisingTag) {\n        exisingTag.classList.add('dupe');\n        setTimeout(() => exisingTag.classList.remove('dupe'), 100);\n        return false;\n      }\n    }\n\n    base.insertBefore(\n      createElement('span', 'tag', tag, {\n        tag,\n      }),\n      base.input,\n    );\n  }\n\n  function select(el) {\n    const sel = $('.selected');\n    if (sel) sel.classList.remove('selected');\n    if (el) el.classList.add('selected');\n  }\n\n  function setInputWidth() {\n    const last = $('.tag', true).pop();\n\n    const w = base.offsetWidth;\n    if (!w) return;\n    base.input.style.width = `${Math.max(\n      w - (last ? (last.offsetLeft + last.offsetWidth) : 5) - 5,\n      w / 4,\n    )}px`;\n  }\n\n  function savePartialInput(value) {\n    if (typeof value !== 'string' && !Array.isArray(value)) {\n      // If the base input does not contain a value, default to the original element passed\n      value = base.input.value;\n    }\n    if (addTag(value) !== false) {\n      base.input.value = '';\n      save();\n      setInputWidth();\n    }\n  }\n\n  function refocus(e) {\n    if (e.target.classList.contains('tag')) select(e.target);\n    if (e.target === base.input) return select();\n    base.input.focus();\n    e.preventDefault();\n    return false;\n  }\n\n  function caretAtStart(el) {\n    try {\n      return el.selectionStart === 0 && el.selectionEnd === 0;\n    } catch (e) {\n      return el.value === '';\n    }\n  }\n\n\n  let base = createElement('div', 'tags-input');\n\n  const sib = input.nextSibling;\n\n  input.parentNode[sib ? 'insertBefore' : 'appendChild'](base, sib);\n\n  input.style.cssText = 'position:absolute;left:0;top:-99px;width:1px;height:1px;opacity:0.01;';\n  input.tabIndex = -1;\n\n  let inputType = input.getAttribute('type');\n  if (!inputType || inputType === 'tags') {\n    inputType = 'text';\n  }\n  base.input = createElement('input');\n  base.input.setAttribute('type', inputType);\n  COPY_PROPS.forEach((prop) => {\n    if (input[prop] !== base.input[prop]) {\n      base.input[prop] = input[prop];\n      try {\n        delete input[prop];\n      } catch (e) {}\n    }\n  });\n  base.appendChild(base.input);\n\n  input.addEventListener('focus', () => {\n    base.input.focus();\n  });\n\n  base.input.addEventListener('focus', () => {\n    base.classList.add('focus');\n    select();\n  });\n\n  base.input.addEventListener('blur', () => {\n    base.classList.remove('focus');\n    select();\n    savePartialInput();\n  });\n\n  base.input.addEventListener('keydown', (e) => {\n    const el = base.input;\n    const key = e.keyCode || e.which;\n    const selectedTag = $('.tag.selected');\n    const atStart = caretAtStart(el);\n    const last = $('.tag', true).pop();\n\n    setInputWidth();\n\n    if (key === ENTER || key === COMMA || key === TAB) {\n      if (!el.value && key !== COMMA) return;\n      savePartialInput();\n    } else if (key === DELETE && selectedTag) {\n      if (selectedTag.nextSibling !== base.input) select(selectedTag.nextSibling);\n      base.removeChild(selectedTag);\n      setInputWidth();\n      save();\n    } else if (key === BACKSPACE) {\n      if (selectedTag) {\n        select(selectedTag.previousSibling);\n        base.removeChild(selectedTag);\n        setInputWidth();\n        save();\n      } else if (last && atStart) {\n        select(last);\n      } else {\n        return;\n      }\n    } else if (key === LEFT) {\n      if (selectedTag) {\n        if (selectedTag.previousSibling) {\n          select(selectedTag.previousSibling);\n        }\n      } else if (!atStart) {\n        return;\n      } else {\n        select(last);\n      }\n    } else if (key === RIGHT) {\n      if (!selectedTag) return;\n      select(selectedTag.nextSibling);\n    } else {\n      return select();\n    }\n\n    e.preventDefault();\n    return false;\n  });\n\n  base.input.addEventListener('keyup', () => {\n    const el = base.input;\n    const count = document.querySelector('.tags-input').childElementCount;\n\n    if (count === (limit + 1)) {\n      el.maxLength = el.value.length;\n    } else {\n      el.maxLength = 30;\n    }\n  });\n\n  // Proxy \"input\" (live change) events , update the first tag live as the user types\n  // This means that users who only want one thing don't have to enter commas\n  base.input.addEventListener('input', () => {\n    input.value = getValue();\n    input.dispatchEvent(new Event('input'));\n  });\n\n  // One tick after pasting, parse pasted text as CSV:\n  base.input.addEventListener('paste', () => setTimeout(savePartialInput, 0));\n\n  base.addEventListener('mousedown', refocus);\n  base.addEventListener('touchstart', refocus);\n\n  base.setValue = setValue;\n  base.getValue = getValue;\n\n  // Add tags for existing values\n  savePartialInput(input.value);\n}\n\n// make life easier:\ntagsInput.enhance = tagsInput.tagsInput = tagsInput;\n"]}